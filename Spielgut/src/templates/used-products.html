{% extends "layout.html" %}

{% block content %}
<form action="/used-products" method="get" class="filter-form">
  <div class="filter-row">
    <div class="filter-group">
      <label for="category">Kategorie:</label>
      <select id="category" name="category" class="form-input">
        <option value="">Alle Kategorien</option>
        {% for kategorie in kategorien %}
          <option value="{{ kategorie.id }}" {% if request.query.category == kategorie.id %}selected{% endif %}>{{ kategorie.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="filter-group">
      <label for="priceMin">Preis von:</label>
      <input type="number" id="priceMin" name="priceMin" class="form-input" value="{{ request.query.priceMin }}" min="0" step="0.01">
    </div>
    <div class="filter-group">
      <label for="priceMax">Preis bis:</label>
      <input type="number" id="priceMax" name="priceMax" class="form-input" value="{{ request.query.priceMax }}" min="0" step="0.01">
    </div>
    <div class="filter-group">
      <label for="condition">Zustand:</label>
      <select id="condition" name="condition" class="form-input">
        <option value="">Alle Zustände</option>
        {% for zustand in zustände %}
          <option value="{{ zustand.id }}" {% if request.query.condition == zustand.id %}selected{% endif %}>{{ zustand.name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Filter anwenden</button>
  </div>
</form>

<section class="product-page">
  <div>
    <h1 class="product-page-title">Gebrauchte Produkte</h1>
  </div>
  <div class="product-grid">
    {% for product in products %}
    <a href="/used-product/{{ product.id }}" class="product-page-card">
      <img src="{{ product.bild_pfad }}" alt="{{ product.name }}" class="product-page-image">
      <h2 class="product-title">{{ product.name }}</h2>
      <p class="product-description">{{ product.preis }}€</p>
      <p class="product-category">{{ product.kategorie_name }}</p>
      <p class="product-condition">{{ product.zustand }}</p>
    </a>
    {% endfor %}
  </div>
</section>
{% endblock %}

