{% extends "layout.html" %}

{% block content %}
<!-- filter-Funktion -->
<form action="/used-products" method="get" class="filter-form">
  <div class="filter-row">
    <div class="filter-group">
      <label for="category">Kategorie:</label>
      <select id="category" name="category" class="form-input">
        <option value="">Alle Kategorien</option>
        <option value="musikinstrumente" {% if request.query.category == 'musikinstrumente' %}selected{% endif %}>Musikinstrumente</option>
        <option value="kreatives_spielzeug" {% if request.query.category == 'kreatives_spielzeug' %}selected{% endif %}>Kreatives Spielzeug</option>
        <option value="bewegungsspielzeug" {% if request.query.category == 'bewegungsspielzeug' %}selected{% endif %}>Bewegungsspielzeug</option>
        <option value="lernspielzeug" {% if request.query.category == 'lernspielzeug' %}selected{% endif %}>Lernspielzeug</option>
        <option value="rollenspiel" {% if request.query.category == 'rollenspiel' %}selected{% endif %}>Rollenspiel</option>
        <option value="konstruktionsspielzeug" {% if request.query.category == 'konstruktionsspielzeug' %}selected{% endif %}>Konstruktionsspielzeug</option>
      </select>
    </div>
    <div class="filter-group">
      <label for="priceMin">Preis von:</label>
      <select id="priceMin" name="priceMin" class="form-input">
        <option value="">Beliebig</option>
        <option value="5" {% if request.query.priceMin == '5' %}selected{% endif %}>5€</option>
        <option value="10" {% if request.query.priceMin == '10' %}selected{% endif %}>10€</option>
        <option value="15" {% if request.query.priceMin == '15' %}selected{% endif %}>15€</option>
        <option value="20" {% if request.query.priceMin == '20' %}selected{% endif %}>20€</option>
        <option value="25" {% if request.query.priceMin == '25' %}selected{% endif %}>25€</option>
        <option value="30" {% if request.query.priceMin == '30' %}selected{% endif %}>30€</option>
        <option value="35" {% if request.query.priceMin == '35' %}selected{% endif %}>35€</option>
        <option value="40" {% if request.query.priceMin == '40' %}selected{% endif %}>40€</option>
        <option value="45" {% if request.query.priceMin == '45' %}selected{% endif %}>45€</option>
        <option value="50" {% if request.query.priceMin == '50' %}selected{% endif %}>50€</option>
        <option value="55" {% if request.query.priceMin == '55' %}selected{% endif %}>55€</option>
      </select>
    </div>
    <div class="filter-group">
      <label for="priceMax">Preis bis:</label>
      <select id="priceMax" name="priceMax" class="form-input">
        <option value="">Beliebig</option>
        <option value="10" {% if request.query.priceMax == '10' %}selected{% endif %}>Unter 10€</option>
        <option value="20" {% if request.query.priceMax == '20' %}selected{% endif %}>Unter 20€</option>
        <option value="30" {% if request.query.priceMax == '30' %}selected{% endif %}>Unter 30€</option>
        <option value="40" {% if request.query.priceMax == '40' %}selected{% endif %}>Unter 40€</option>
        <option value="50" {% if request.query.priceMax == '50' %}selected{% endif %}>Unter 50€</option>
        <option value="60" {% if request.query.priceMax == '60' %}selected{% endif %}>Unter 60€</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Filter anwenden</button>
  </div>
</form>


<section class="product-page">
  <h1 class="product-page-title">Gebrauchte Produkte</h1>
  <div class="product-grid">
    {% for product in products %}
    <a href="/product/{{ product.id }}" class="product-page-card">
      <img src="{{ product.bild_pfad }}" alt="{{ product.name }}" class="product-page-image">
      <h2 class="product-title">{{ product.name }}</h2>
      <p class="product-description">{{ product.preis }}€</p>
    </a>
    {% endfor %}
  </div>

  <div class="pagination">
    {% if currentPage > 1 %}
      <a href="/new-products?page={{ currentPage - 1 }}{% if request.query.category %}&category={{ request.query.category }}{% endif %}{% if request.query.priceMin %}&priceMin={{ request.query.priceMin }}{% endif %}{% if request.query.priceMax %}&priceMax={{ request.query.priceMax }}{% endif %}" class="pagination-button">Vorherige</a>
    {% endif %}
  
    <span class="pagination-info">Seite {{ currentPage }} von {{ totalPages }}</span>
  
    {% if currentPage < totalPages %}
      <a href="/new-products?page={{ currentPage + 1 }}{% if request.query.category %}&category={{ request.query.category }}{% endif %}{% if request.query.priceMin %}&priceMin={{ request.query.priceMin }}{% endif %}{% if request.query.priceMax %}&priceMax={{ request.query.priceMax }}{% endif %}" class="pagination-button">Nächste</a>
    {% endif %}
  </div>
</section>
{% endblock %}

